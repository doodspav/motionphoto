repos:

  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v4.6.0
    hooks:
      - id: check-byte-order-marker
      - id: check-case-conflict
      - id: check-executables-have-shebangs
      - id: check-json
      - id: check-shebang-scripts-are-executable
      - id: check-symlinks
      - id: check-toml
      - id: check-vcs-permalinks
      - id: check-xml
      - id: check-yaml
      - id: debug-statements
      - id: destroyed-symlinks
      - id: detect-private-key

  # Using this mirror lets us use mypyc-compiled black, which is about 2x faster
  - repo: https://github.com/psf/black-pre-commit-mirror
    rev: 24.4.0
    hooks:
      - id: black
        args: [--check]

  - repo: local
    hooks:
      - id: flake8
        name: flake8
        language: script
        types: [python]
        entry: venv/bin/flake8
        exclude: ^tests/

  - repo: local
    hooks:
      - id: mypy
        name: mypy
        language: script
        types: [python]
        entry: venv/bin/mypy
        exclude: ^tests/

  - repo: local
    hooks:
      - id: pylint
        name: pylint
        language: script
        types: [python]
        entry: venv/bin/pylint
        args: [--fail-under=10]
        exclude: ^tests/

  - repo: local
    hooks:
      - id: unittest-unit
        name: unittest-unit
        language: script
        types: [python]
        entry: venv/bin/python
        args: [-m, coverage, run, --branch, -m, unittest, discover, -s, tests/unit]
        pass_filenames: false

  - repo: local
    hooks:
      - id: coverage
        name: coverage
        language: script
        types: [python]
        entry: venv/bin/python
        args: [-m, coverage, report, --fail-under=40]
        pass_filenames: false
